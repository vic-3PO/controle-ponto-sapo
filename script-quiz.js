const quizzes = {
    quiz1: {
        titulo: "Geopolítica Básica",
        perguntas: [{
            nivel: "Fácil",
            pergunta: "O que é geopolítica?",
            alternativas: [
                "A) Estudo da influência da geografia no poder e nas relações internacionais",
                "B) Análise exclusiva das fronteiras políticas",
                "C) Estudo das relações econômicas entre países",
                "D) Análise dos fenômenos culturais isoladamente"
            ],
            resposta: "A"
        },
        {
            nivel: "Fácil",
            pergunta: "Qual é o país com a maior extensão territorial do mundo?",
            alternativas: ["A) Rússia", "B) Canadá", "C) Estados Unidos", "D) China"],
            resposta: "A"
        },
        {
            nivel: "Médio",
            pergunta: "Qual teoria geopolítica foi proposta por Halford Mackinder?",
            alternativas: ["A) Teoria do Rim Vital", "B) Teoria do Heartland", "C) Teoria do Front Remoto", "D) Teoria do Poder Marítimo"],
            resposta: "B"
        },
        {
            nivel: "Médio",
            pergunta: "Quem foi Alfred Mahan e qual sua principal contribuição para o pensamento geopolítico?",
            alternativas: ["A) Geógrafo que estudou a influência das fronteiras naturais", "B) Historiador das relações internacionais", "C) Teórico naval que destacou a importância do poder marítimo", "D) Economista focado em rotas comerciais terrestres"],
            resposta: "C"
        },
        {
            nivel: "Fácil",
            pergunta: "O que significa o termo 'soft power'?",
            alternativas: ["A) Poder militar", "B) Poder econômico", "C) Capacidade de atrair e influenciar por meio de cultura e diplomacia", "D) Poder coercitivo"],
            resposta: "C"
        },
        {
            nivel: "Fácil",
            pergunta: "Qual a importância do Canal de Suez na geopolítica mundial?",
            alternativas: ["A) Facilita o transporte marítimo entre Europa e Ásia", "B) Conecta o Oceano Atlântico ao Pacífico", "C) É a principal rota de exportação dos EUA", "D) Não possui relevância estratégica"],
            resposta: "A"
        },
        {
            nivel: "Médio",
            pergunta: "Qual teoria enfatiza a importância do controle dos mares para o poder global?",
            alternativas: ["A) Teoria do Heartland", "B) Teoria do Rim Vital", "C) Teoria Marítima de Alfred Mahan", "D) Teoria do Poder Terrestre"],
            resposta: "C"
        },
        {
            nivel: "Fácil",
            pergunta: "O que foi a Doutrina Monroe?",
            alternativas: ["A) Política de intervenção dos EUA na Europa", "B) Política de não intervenção na América Latina", "C) Declaração de que qualquer intervenção europeia no Hemisfério Ocidental seria vista como ameaça", "D) Estratégia de expansão territorial dos EUA"],
            resposta: "C"
        },
        {
            nivel: "Fácil",
            pergunta: "Qual dos seguintes países fazia parte do 'Eixo' na Segunda Guerra Mundial?",
            alternativas: ["A) França", "B) União Soviética", "C) Alemanha", "D) Reino Unido"],
            resposta: "C"
        },
        {
            nivel: "Médio",
            pergunta: "O que caracteriza um mundo 'unipolar' na teoria das relações internacionais?",
            alternativas: ["A) Distribuição equilibrada de poder entre diversos países", "B) Domínio de uma única potência global", "C) Sistema dividido em dois grandes blocos", "D) Isolamento de todas as nações"],
            resposta: "B"
        },
        {
            nivel: "Difícil",
            pergunta: "Qual conceito defende que as características naturais – como relevo, clima e hidrografia – determinam, em grande medida, as estruturas políticas e sociais de um país?",
            alternativas: ["A) Determinismo geográfico", "B) Realpolitik", "C) Geopolítica construtivista", "D) Globalização"],
            resposta: "A"
        },
        {
            nivel: "Médio",
            pergunta: "Qual foi a importância histórica da Rota da Seda?",
            alternativas: ["A) Serviu apenas como um caminho para o comércio de especiarias", "B) Facilitou intercâmbios culturais, comerciais e políticos entre o Oriente e o Ocidente", "C) Foi uma rota exclusiva para missões militares", "D) Não teve impacto relevante nas relações internacionais"],
            resposta: "B"
        },
        {
            nivel: "Médio",
            pergunta: "Na geopolítica, o conceito de 'realpolitik' refere-se a:",
            alternativas: ["A) Uma política baseada em ideologias utópicas", "B) Uma abordagem pragmática que prioriza os interesses nacionais e a realidade dos fatos", "C) A política de intervenção humanitária em massa", "D) Uma estratégia de isolamento absoluto"],
            resposta: "B"
        },
        {
            nivel: "Médio",
            pergunta: "Quais dos fatores a seguir foram fundamentais para o início da Guerra Fria?",
            alternativas: ["A) Conflitos religiosos e disputas territoriais locais", "B) Diferenças ideológicas entre capitalismo e comunismo, rivalidades militares e questões territoriais", "C) Apenas divergências econômicas", "D) Exclusivamente a corrida armamentista nuclear"],
            resposta: "B"
        },
        {
            nivel: "Difícil",
            pergunta: "O que significa a expressão 'O Fim da História', popularizada por Francis Fukuyama?",
            alternativas: ["A) O encerramento dos conflitos militares globais", "B) O triunfo definitivo da democracia liberal e do capitalismo como modelo final", "C) O colapso irreversível das ideologias políticas", "D) O término dos estudos históricos como disciplina"],
            resposta: "B"
        }]
    },
    quiz2: {
        titulo: "Relações Internacionais",
        "perguntas": [
            {
                "nivel": "Fácil",
                "pergunta": "Qual é o principal objetivo da ONU?",
                "alternativas": [
                    "A) Controlar a economia global",
                    "B) Manter a paz e segurança internacionais",
                    "C) Estabelecer um governo mundial",
                    "D) Regular o comércio internacional"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que significa o princípio de não-intervenção no Direito Internacional?",
                "alternativas": [
                    "A) Intervenção apenas mediante consentimento do Estado afetado",
                    "B) Direito de impor sanções econômicas",
                    "C) Proibição de ingerência nos assuntos internos dos Estados",
                    "D) Permissão para intervenções militares unilaterais"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual conceito descreve a interdependência complexa nas relações internacionais?",
                "alternativas": [
                    "A) Teoria de Keohane e Nye",
                    "B) Realismo Estrutural",
                    "C) Construtivismo",
                    "D) Liberalismo Clássico"
                ],
                "resposta": "A"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual organização é responsável por promover o livre comércio global?",
                "alternativas": [
                    "A) FMI",
                    "B) OMC",
                    "C) Banco Mundial",
                    "D) OCDE"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que estabelece o Artigo 51 da Carta da ONU?",
                "alternativas": [
                    "A) Criação do Conselho de Segurança",
                    "B) Direito à legítima defesa individual e coletiva",
                    "C) Proibição de uso de armas nucleares",
                    "D) Estabelecimento de sanções internacionais"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual teórico é associado ao conceito de 'Anarquia Internacional'?",
                "alternativas": [
                    "A) John Mearsheimer",
                    "B) Joseph Nye",
                    "C) Kenneth Waltz",
                    "D) Immanuel Wallerstein"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Fácil",
                "pergunta": "O que significa a sigla OTAN?",
                "alternativas": [
                    "A) Organização do Tratado do Atlântico Norte",
                    "B) Organização de Tratados de Ação Naval",
                    "C) Organização para a Transformação do Atlântico Norte",
                    "D) Organização de Trocas e Acordos Nacionais"
                ],
                "resposta": "A"
            },
            {
                "nivel": "Médio",
                "pergunta": "Qual foi o principal objetivo da Doutrina Truman?",
                "alternativas": [
                    "A) Estabelecer bases militares globais",
                    "B) Fomentar a descolonização",
                    "C) Criar a União Europeia",
                    "D) Conter a expansão do comunismo"
                ],
                "resposta": "D"
            },
            {
                "nivel": "Difícil",
                "pergunta": "O que caracteriza o conceito de 'Guerra Híbrida'?",
                "alternativas": [
                    "A) Uso exclusivo de ciberataques",
                    "B) Combinação de métodos convencionais e não convencionais",
                    "C) Conflitos limitados a uma região específica",
                    "D) Guerras entre Estados e grupos insurgentes"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual país não é membro permanente do Conselho de Segurança da ONU?",
                "alternativas": [
                    "A) Rússia",
                    "B) Reino Unido",
                    "C) Alemanha",
                    "D) China"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que estabelece a Convenção de Genebra?",
                "alternativas": [
                    "A) Normas para proteção de civis e prisioneiros de guerra",
                    "B) Regras para comércio internacional",
                    "C) Direitos autorais globais",
                    "D) Protocolos ambientais em zonas de conflito"
                ],
                "resposta": "A"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual teórico propôs o conceito de 'Sociedade Internacional'?",
                "alternativas": [
                    "A) Hedley Bull",
                    "B) Robert Keohane",
                    "C) Samuel Huntington",
                    "D) John Rawls"
                ],
                "resposta": "A"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual destes é um órgão principal da ONU?",
                "alternativas": [
                    "A) Assembleia Geral",
                    "B) Corte Internacional de Justiça",
                    "C) Fórum Econômico Mundial",
                    "D) Banco Interamericano de Desenvolvimento"
                ],
                "resposta": "A"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que é o Direito Internacional Humanitário?",
                "alternativas": [
                    "A) Regras para resolução de conflitos",
                    "B) Leis sobre imigração",
                    "C) Conjunto de normas para limitar os efeitos da guerra",
                    "D) Tratados ambientais"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual conceito define a capacidade de um Estado impor sua vontade no sistema internacional?",
                "alternativas": [
                    "A) Soft Power",
                    "B) Poder Normativo",
                    "C) Smart Power",
                    "D) Hard Power"
                ],
                "resposta": "D"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Quantos membros tem a OTAN atualmente?",
                "alternativas": [
                    "A) 30",
                    "B) 28",
                    "C) 31",
                    "D) 32"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que é 'Balança de Poder' nas Relações Internacionais?",
                "alternativas": [
                    "A) Distribuição equitativa de recursos naturais",
                    "B) Sistema que previne a hegemonia de um Estado",
                    "C) Controle de armamentos nucleares",
                    "D) Equilíbrio econômico global"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual evento marcou o início do sistema Westfaliano?",
                "alternativas": [
                    "A) Congresso de Viena",
                    "B) Tratado de Versalhes",
                    "C) Paz de Westfália (1648)",
                    "D) Revolução Francesa"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual destes é um país membro do BRICS?",
                "alternativas": [
                    "A) México",
                    "B) Rússia",
                    "C) Índia",
                    "D) Turquia"
                ],
                "resposta": "B"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que significa 'jus ad bellum'?",
                "alternativas": [
                    "A) Direito pós-conflito",
                    "B) Proibição de guerra de agressão",
                    "C) Direito de recorrer à guerra",
                    "D) Direito durante o conflito"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Quem cunhou o termo 'Soft Power'?",
                "alternativas": [
                    "A) Henry Kissinger",
                    "B) Samuel Huntington",
                    "C) Joseph Nye",
                    "D) Francis Fukuyama"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual organização supervisiona o comércio global?",
                "alternativas": [
                    "A) Banco Mundial",
                    "B) FMI",
                    "C) OMC",
                    "D) OIT"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Médio",
                "pergunta": "O que é um 'Estado Falido'?",
                "alternativas": [
                    "A) Estado que não participa de organizações internacionais",
                    "B) Estado com economia subdesenvolvida",
                    "C) Estado sem controle efetivo sobre seu território",
                    "D) Estado com governo autoritário"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Difícil",
                "pergunta": "Qual teórico propôs o 'Choque de Civilizações'?",
                "alternativas": [
                    "A) Zbigniew Brzezinski",
                    "B) Francis Fukuyama",
                    "C) Samuel Huntington",
                    "D) Noam Chomsky"
                ],
                "resposta": "C"
            },
            {
                "nivel": "Fácil",
                "pergunta": "Qual destes é um tribunal internacional?",
                "alternativas": [
                    "A) Interpol",
                    "B) Tribunal Penal Internacional",
                    "C) Corte Internacional de Justiça",
                    "D) Assembleia de Haia"
                ],
                "resposta": "C"
            }
        ]
    }

};

let quizAtivo = localStorage.getItem('quizAtivo') || 'quiz1';
let respostas = JSON.parse(localStorage.getItem(`respostas_${quizAtivo}`)) || [];
let currentQuestionIndex = parseInt(localStorage.getItem(`currentQuestionIndex_${quizAtivo}`)) || 0;


function carregarQuiz(quizId) {
    // Atualiza estado
    quizAtivo = quizId;
    respostas = JSON.parse(localStorage.getItem(`respostas_${quizId}`)) || [];
    currentQuestionIndex = parseInt(localStorage.getItem(`currentQuestionIndex_${quizId}`)) || 0;

    // Atualiza UI
    document.querySelectorAll('.quiz-tab').forEach(tab => {
        tab.classList.toggle('active', tab.textContent === quizzes[quizId].titulo);
    });

    // Renderiza quiz
    renderQuiz();

    // Salva estado
    localStorage.setItem('quizAtivo', quizId);
}

function renderQuiz() {
    const quiz = quizzes[quizAtivo];
    const quizContainer = document.getElementById("quiz-container");
    quizContainer.innerHTML = `<h3>${quiz.titulo}</h3>`;

    updateScore();

    quiz.perguntas.forEach((questao, index) => {
        const isRespondida = respostas[index];
        const respostaUsuario = respostas[index];
        const respostaCorreta = questao.resposta;
        const acertou = respostaUsuario === respostaCorreta;

        const card = document.createElement("div");
        card.className = `quiz-card ${isRespondida ? (acertou ? 'correct' : 'wrong') : ''}`;

        card.innerHTML = `
            <h3>${index + 1}. ${questao.pergunta}</h3>
            <p><strong>Nível:</strong> ${questao.nivel}</p>
            
            <div class="options">
                ${questao.alternativas.map(alt => {
            const letra = alt[0];
            const texto = alt.split(') ')[1];
            const isCorreta = letra === respostaCorreta;
            const isSelecionada = letra === respostaUsuario;

            let status = '';
            if (isRespondida) {
                if (isCorreta) status = '✅ Resposta Correta';
                else if (isSelecionada) status = '❌ Sua Resposta';
            }

            return `
                        <label class="${isRespondida ? 'disabled' : ''}">
                            <input type="radio" 
                                name="pergunta${index}" 
                                value="${letra}"
                                ${isSelecionada ? 'checked' : ''}
                                ${isRespondida ? 'disabled' : ''}>
                            <span>
                                ${alt}
                                ${status && `<span class="${isCorreta ? 'correct-answer-badge' : 'wrong-answer-badge'}">${status}</span>`}
                            </span>
                        </label>
                    `;
        }).join('')}
            </div>

            ${isRespondida && !acertou ? `
                <div class="answer-explanation">
                    <p>📝 Explicação: A resposta correta é <strong>${respostaCorreta}</strong> - 
                    ${questao.alternativas.find(a => a[0] === respostaCorreta).split(') ')[1]}</p>
                </div>
            ` : ''}

            ${!isRespondida ? `<button class="button" onclick="responder(${index})">Responder 🐸</button>` : ''}
        `;

        quizContainer.appendChild(card);
    });

    if (currentQuestionIndex >= quiz.perguntas.length) {
        quizContainer.innerHTML += `
            <div class="quiz-result">
                <h3>🎉 Quiz Concluído! 🎉</h3>
                <p>Você acertou ${getCorrectCount()} de ${quiz.perguntas.length} perguntas!</p>
                <button class="button" onclick="reiniciarQuiz()">Jogar Novamente</button>
            </div>
        `;
    }

}


function responder(index) {
    const selected = document.querySelector(`input[name="pergunta${index}"]:checked`);
    if (!selected) return alert('Selecione uma resposta!');

    respostas[index] = selected.value;
    // localStorage.setItem('respostas', JSON.stringify(respostas));

    // localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
    localStorage.setItem(`respostas_${quizAtivo}`, JSON.stringify(respostas));
    currentQuestionIndex = Math.max(currentQuestionIndex, index + 1);
    localStorage.setItem(`currentQuestionIndex_${quizAtivo}`, currentQuestionIndex);

    renderQuiz();
}

function getCorrectCount() {
    return quizzes[quizAtivo].perguntas.reduce((acc, questao, index) =>
        acc + (respostas[index] === questao.resposta ? 1 : 0), 0);
}

function updateScore() {
    const correct = getCorrectCount();
    document.getElementById('correct-count').textContent = correct;
    document.getElementById('wrong-count').textContent = respostas.filter((r, i) =>
        r !== quizzes[quizAtivo].perguntas[i].resposta).length;
}

function reiniciarQuiz() {
    localStorage.removeItem(`respostas_${quizAtivo}`);
    localStorage.removeItem(`currentQuestionIndex_${quizAtivo}`);
    respostas = [];
    currentQuestionIndex = 0;
    renderQuiz();
}

document.addEventListener('DOMContentLoaded', () => {
    carregarQuiz(quizAtivo);
});